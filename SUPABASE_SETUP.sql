-- Maxfolio Supabase Schema Setup
-- 1. Create Profiles Table
CREATE TABLE profiles (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    job TEXT,
    bio TEXT,
    skills TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- 2. Create Accepted Jobs Table
CREATE TABLE accepted_jobs (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username TEXT REFERENCES profiles(username),
    job_title TEXT,
    pay TEXT,
    accepted_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- 3. Enable Row Level Security (Optional for complete chaos, but good practice)
-- ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;
-- CREATE POLICY "Public profiles are viewable by everyone" ON profiles FOR SELECT USING (true);
-- CREATE POLICY "Users can insert their own profile" ON profiles FOR INSERT WITH CHECK (true);
